<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Interface for the Automated Hydroponics System</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <style>
        /* Center-align the title in the header */
        header {
            text-align: center;
        }

        /* CSS to create a horizontal layout for iframes */
        .iframe-container {
            display: inline-block;
            margin-right: 10px; /* Add spacing between iframes */
            text-align: center; /* Center-align the caption */
        }

        /* CSS to style the captions */
        .iframe-caption {
            font-weight: bold; /* Make the caption bold */
        }

        /* CSS for the current time clock */
        #current-time {
            float: right;
            font-size: 18px;
            margin-top: 10px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Web Interface for the Automated Hydroponics System</h1>
    </header>

    <!-- Display current time -->
    <div id="current-time"></div>

    <nav>
        <ul>
            <li><a href="#section1">Visualizations</a></li>
            <li><a href="#section2">Updated Values</a></li>
            <!-- Add more navigation links as needed -->
        </ul>
    </nav>

    <section id="section1">
        <h2>Visualizations</h2>
        
        <!-- Embed ThingSpeak visualizations here using iframes -->
        <div class="iframe-container">
            
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&title=Electrical+Conductivity&type=line&xaxis=Time&yaxis=EC+%28in+microSiemens%2Fm%29"></iframe>
        </div>
        <div class="iframe-container">
            
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/charts/2?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&title=pH&type=line&xaxis=Time&yaxis=pH"></iframe>
        </div>
        <div class="iframe-container">
            
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/charts/3?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&title=Humidity&type=line&xaxis=Time&yaxis=Humidity+%28in+%25%29"></iframe>
        </div>
        <div class="iframe-container">
            
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/charts/4?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&title=Air+Temperature&type=line&xaxis=Time&yaxis=Air+Temperature+%28°C%29"></iframe>
        </div>
        <div class="iframe-container">
            
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/charts/5?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&title=Water+Temperature&type=line&xaxis=Time&yaxis=Water+Temperature+%28°C%29"></iframe>
        </div>
        <div class="iframe-container">
            
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/charts/6?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&title=Water+Level&type=line&xaxis=Time&yaxis=Water+Level+%28in+cm%29"></iframe>
        </div>
    </section>

    <section id="section2">
        <h2>Updated Values</h2>
        
        <!-- Embed ThingSpeak widgets here using iframes -->
        <div class="iframe-container">
            <p class="iframe-caption">Electrical Conductivity</p>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/widgets/708239"></iframe>
        </div>
        <div class="iframe-container">
            <p class="iframe-caption">pH</p>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/widgets/708240"></iframe>
        </div>
        <div class="iframe-container">
            <p class="iframe-caption">Humidity</p>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/widgets/708241"></iframe>
        </div>
        <div class="iframe-container">
            <p class="iframe-caption">Air Temperature</p>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/widgets/708242"></iframe>
        </div>
        <div class="iframe-container">
            <p class="iframe-caption">Water Temperature</p>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/widgets/708243"></iframe>
        </div>
        <div class="iframe-container">
            <p class="iframe-caption">Water Level</p>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2271152/widgets/708244"></iframe>
        </div>
    </section>

    <!-- Add more sections and content as needed -->


    <script>
        // Function to display current time
        function displayCurrentTime() {
            const currentTimeElement = document.getElementById('current-time');
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            currentTimeElement.textContent = `Current Time: ${timeString}`;
        }

        // Update the current time every second
        setInterval(displayCurrentTime, 1000);

        // Initial call to display current time
        displayCurrentTime();


    </script>

<h1>Choose the type of plant you want to grow:</h1>
    <form method="POST" action="http://192.168.1.2:5000/run_script">
        <select name="script_name">
            <option value="Lettuce">Lettuce</option>
            <option value="Option 2">Option 2</option>
            <option value="Option 3">Option 3</option>
        </select>
        <br><br>
        <input type="submit" value="Run Script">
        <span id="current-script">Current Script: None</span>
    </form>
     

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    // Function to get the currently running script from the server
    function getCurrentScript() {
        $.get('http://192.168.1.2:5000/current_script', function(response) {
            // Update the content of the "current-script" span with the received script name
            $('#current-script').text('Current Script: ' + response.scriptName);
        });
    }

    // Periodically update the currently running script every 5 seconds (adjust the interval as needed)
    setInterval(getCurrentScript, 5000);

    // Initial call to get the current script
    getCurrentScript();
</script>


<footer>
    <p>&copy; Web Interface for the Automated Hydroponics System</p>
</footer>

</body>
</html>
